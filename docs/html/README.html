<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChainGraph - README</title>
    <style>

:root {
    --bg-color: #1a1a2e;
    --sidebar-bg: #16213e;
    --content-bg: #0f0f23;
    --text-color: #e4e4e4;
    --heading-color: #00d9ff;
    --link-color: #64b5f6;
    --code-bg: #2d2d4a;
    --border-color: #3d3d5c;
    --table-header-bg: #2a2a4a;
    --success-color: #4caf50;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}

.container {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 280px;
    background-color: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    position: fixed;
    height: 100vh;
    overflow-y: auto;
}

.sidebar-header {
    padding: 20px;
    border-bottom: 1px solid var(--border-color);
    background: linear-gradient(135deg, #1e3a5f 0%, #16213e 100%);
}

.sidebar-header h2 {
    color: var(--heading-color);
    font-size: 1.2rem;
}

.sidebar-content {
    padding: 15px;
}

.sidebar-content ul {
    list-style: none;
}

.sidebar-content li {
    margin: 5px 0;
}

.sidebar-content a {
    color: var(--text-color);
    text-decoration: none;
    font-size: 0.9rem;
    display: block;
    padding: 5px 10px;
    border-radius: 5px;
    transition: all 0.2s;
}

.sidebar-content a:hover {
    background-color: var(--code-bg);
    color: var(--heading-color);
}

.content {
    margin-left: 280px;
    padding: 40px 60px;
    max-width: 1000px;
    background-color: var(--content-bg);
    min-height: 100vh;
}

h1, h2, h3, h4, h5, h6 {
    color: var(--heading-color);
    margin: 1.5em 0 0.5em;
    font-weight: 600;
}

h1 {
    font-size: 2.5rem;
    border-bottom: 2px solid var(--heading-color);
    padding-bottom: 10px;
}

h2 {
    font-size: 1.8rem;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 8px;
}

h3 {
    font-size: 1.4rem;
}

h4 {
    font-size: 1.2rem;
}

p {
    margin: 1em 0;
}

a {
    color: var(--link-color);
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

code {
    background-color: var(--code-bg);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9em;
}

pre {
    background-color: var(--code-bg);
    padding: 15px 20px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 1em 0;
    border: 1px solid var(--border-color);
}

pre code {
    background: none;
    padding: 0;
    font-size: 0.85rem;
    line-height: 1.5;
}

.table {
    width: 100%;
    border-collapse: collapse;
    margin: 1em 0;
}

.table th, .table td {
    border: 1px solid var(--border-color);
    padding: 10px 15px;
    text-align: left;
}

.table th {
    background-color: var(--table-header-bg);
    color: var(--heading-color);
    font-weight: 600;
}

.table tr:nth-child(even) {
    background-color: rgba(45, 45, 74, 0.3);
}

ul, ol {
    margin: 1em 0;
    padding-left: 2em;
}

li {
    margin: 0.5em 0;
}

hr {
    border: none;
    border-top: 1px solid var(--border-color);
    margin: 2em 0;
}

img {
    max-width: 100%;
    height: auto;
}

blockquote {
    border-left: 4px solid var(--heading-color);
    padding-left: 20px;
    margin: 1em 0;
    color: #aaa;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .sidebar {
        display: none;
    }
    .content {
        margin-left: 0;
        padding: 20px;
    }
}

/* ä»£ç é«˜äº®åŸºç¡€æ ·å¼ */
.language-gql, .language-sql, .language-bash, .language-rust, .language-json {
    color: #a8d4ff;
}

/* æ‰“å°æ ·å¼ */
@media print {
    .sidebar {
        display: none;
    }
    .content {
        margin-left: 0;
        background: white;
        color: black;
    }
    h1, h2, h3, h4 {
        color: #333;
    }
    pre, code {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
    }
}

    </style>
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>ğŸ“– å¯¼èˆª</h2>
            </div>
            <div class="sidebar-content" id="toc">
            </div>
        </nav>
        <main class="content">
<h1 id="chaingraph">ChainGraph</h1>

<p><p align="center"></p>
<p>  <img src="https://img.shields.io/badge/language-Rust-orange.svg" alt="Rust"></p>
<p>  <img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License"></p>
<p>  <img src="https://img.shields.io/badge/version-0.1.0-green.svg" alt="Version"></p>
<p></p></p>

<p><strong>ChainGraph</strong> æ˜¯ä¸€æ¬¾ä¸“ä¸º Web3 åœºæ™¯è®¾è®¡çš„é«˜æ€§èƒ½å›¾æ•°æ®åº“ï¼Œä¸“æ³¨äºåŒºå—é“¾é“¾è·¯è¿½è¸ªå’Œèµ„é‡‘æµåˆ†æã€‚</p>

<h2 id="-ç‰¹æ€§">âœ¨ ç‰¹æ€§</h2>

<ul>
<li>ğŸš€ <strong>SSD ä¼˜åŒ–å­˜å‚¨</strong> - 4KB é¡µé¢å¯¹é½ï¼ŒLRU ç¼“å†²æ± ï¼Œæ”¯æŒæµ·é‡æ•°æ®å­˜å‚¨</li>
<li>ğŸ”— <strong>Web3 åŸç”Ÿç±»å‹</strong> - å†…ç½® Addressã€TxHashã€TokenAmount ç­‰åŒºå—é“¾ç±»å‹</li>
<li>ğŸ” <strong>é“¾è·¯è¿½è¸ªç®—æ³•</strong> - æ”¯æŒæœ€çŸ­è·¯å¾„ã€æ‰€æœ‰è·¯å¾„ã€Nè·³é‚»å±…ç­‰å¤šç§è¿½è¸ªæ–¹å¼</li>
<li>ğŸ’§ <strong>æœ€å¤§æµåˆ†æ</strong> - Edmonds-Karp ç®—æ³•ï¼Œç”¨äºèµ„é‡‘æµåŠ¨åˆ†æå’Œåæ´—é’±æ£€æµ‹</li>
<li>ğŸ“ <strong>ISO GQL 39075 æ ‡å‡†</strong> - å®Œæ•´æ”¯æŒ ISO/IEC 39075 æ ‡å‡†çš„å›¾æŸ¥è¯¢è¯­è¨€</li>
<li>âœ… MATCH æŸ¥è¯¢ï¼šæ¨¡å¼åŒ¹é…ã€é‡åŒ–è·¯å¾„ã€è·¯å¾„æœç´¢å‰ç¼€</li>
<li>âœ… DML æ“ä½œï¼šINSERTã€UPDATEã€DELETEã€DETACH DELETE</li>
<li>âœ… DDL æ“ä½œï¼šCREATE/DROP GRAPHã€CREATE/DROP GRAPH TYPE</li>
<li>âœ… å…ƒæ•°æ®æŸ¥è¯¢ï¼šSHOW GRAPHS/LABELS/PROCEDURESã€DESCRIBE GRAPH/LABEL</li>
<li>âœ… è¿‡ç¨‹è°ƒç”¨ï¼šCALL/OPTIONAL CALL</li>
<li>âœ… å˜é‡ä¸æ§åˆ¶æµï¼šLETã€FORã€FILTER</li>
<li>âœ… SELECT æŸ¥è¯¢ï¼šDISTINCTã€GROUP BYã€HAVINGã€ORDER BYã€LIMITã€OFFSET</li>
<li>âœ… å¤åˆæŸ¥è¯¢ï¼šUNIONã€EXCEPTã€INTERSECTã€OTHERWISE</li>
<li>âœ… ä¼šè¯ç®¡ç†ï¼šSESSION SET/RESET/CLOSE</li>
<li>âœ… äº‹åŠ¡æ§åˆ¶ï¼šSTART TRANSACTIONã€COMMITã€ROLLBACK</li>
<li>ğŸ“¦ <strong>æ‰¹é‡æ•°æ®å¯¼å…¥</strong> - æ”¯æŒ CSV/JSON æ ¼å¼ï¼Œå¤šçº¿ç¨‹å¹¶è¡Œå¯¼å…¥</li>
<li>ğŸŒ <strong>REST API</strong> - å®Œæ•´çš„ HTTP API æœåŠ¡</li>
</ul>

<h2 id="-å¿«é€Ÿå¼€å§‹">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>

<h3 id="å®‰è£…">å®‰è£…</h3>

<pre><code class="language-bash">
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/chaingraph.git
cd chaingraph

# ç¼–è¯‘
cargo build --release

# è¿è¡Œæµ‹è¯•
cargo test
</code></pre>

<h3 id="å¯åŠ¨æœåŠ¡å™¨">å¯åŠ¨æœåŠ¡å™¨</h3>

<pre><code class="language-bash">
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨
./target/release/chaingraph-server

# æŒ‡å®šå‚æ•°å¯åŠ¨
./target/release/chaingraph-server \
    --data-dir ./data \
    --host 0.0.0.0 \
    --port 8080 \
    --buffer-size 1024
</code></pre>

<h3 id="ä½¿ç”¨-cli">ä½¿ç”¨ CLI</h3>

<pre><code class="language-bash">
# äº¤äº’å¼å‘½ä»¤è¡Œ
./target/release/chaingraph-cli --data-dir ./data

# æ‰§è¡Œå•ä¸ªæŸ¥è¯¢
./target/release/chaingraph-cli -e "MATCH (n:Account) RETURN n LIMIT 10"
</code></pre>

<h3 id="å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</h3>

<pre><code class="language-bash">
# ä» CSV å¯¼å…¥
./target/release/chaingraph-import \
    --input transactions.csv \
    --format csv \
    --data-dir ./data

# ä» JSON å¯¼å…¥
./target/release/chaingraph-import \
    --input transactions.jsonl \
    --format jsonl \
    --parallel

# ä½¿ç”¨ GQL INSERT è¯­å¥å¯¼å…¥
./target/release/chaingraph-cli --data-dir ./data -e \
    'INSERT (a:Account {address: "0x742d35Cc6634C0532925a3b844Bc9e7595f3fBb0"})'

# è¿è¡Œç¤ºä¾‹æ•°æ®å¯¼å…¥è„šæœ¬
./examples/import_sample_data.sh ./data
</code></pre>

<h2 id="-gql-æŸ¥è¯¢ç¤ºä¾‹">ğŸ“– GQL æŸ¥è¯¢ç¤ºä¾‹</h2>

<h3 id="åŸºæœ¬æŸ¥è¯¢">åŸºæœ¬æŸ¥è¯¢</h3>

<pre><code class="language-gql">
-- æŸ¥æ‰¾æ‰€æœ‰è´¦æˆ·
MATCH (n:Account) RETURN n LIMIT 100

-- æŸ¥æ‰¾æŒ‡å®šåœ°å€çš„è´¦æˆ·
MATCH (n:Account {address: "0x742d35Cc6634C0532925a3b844Bc9e7595f3fBb0"}) 
RETURN n

-- æŸ¥æ‰¾è½¬è´¦å…³ç³»
MATCH (a:Account)-[t:Transfer]-&gt;(b:Account) 
RETURN a, t, b LIMIT 50
</code></pre>

<h3 id="é“¾è·¯è¿½è¸ª">é“¾è·¯è¿½è¸ª</h3>

<pre><code class="language-gql">
-- æŸ¥æ‰¾ä¸¤ä¸ªåœ°å€ä¹‹é—´çš„è½¬è´¦è·¯å¾„
MATCH path = (a:Account)-[:Transfer*1..5]-&gt;(b:Account)
WHERE a.address = "0xAAA..." AND b.address = "0xBBB..."
RETURN path

-- æŸ¥æ‰¾æŸåœ°å€çš„æ‰€æœ‰å‡ºå‘è½¬è´¦
MATCH (a:Account)-[t:Transfer]-&gt;(b:Account)
WHERE a.address = "0x742d35Cc..."
RETURN b.address, t.amount
</code></pre>

<h3 id="æ•°æ®å†™å…¥-insert">æ•°æ®å†™å…¥ (INSERT)</h3>

<pre><code class="language-gql">
-- æ’å…¥è´¦æˆ·é¡¶ç‚¹
INSERT (alice:Account {address: "0x742d35Cc6634C0532925a3b844Bc9e7595f3fBb0"})

-- æ’å…¥åˆçº¦é¡¶ç‚¹
INSERT (uniswap:Contract {address: "0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D"})

-- æ’å…¥è½¬è´¦è¾¹
INSERT (a:Account {address: "0xAAA..."})-[t:Transfer {amount: 1000, block: 18500000}]-&gt;(b:Account {address: "0xBBB..."})
</code></pre>

<h3 id="è¿‡ç¨‹è°ƒç”¨-call---iso-gql-39075">è¿‡ç¨‹è°ƒç”¨ (CALL) - ISO GQL 39075</h3>

<p>ChainGraph æ”¯æŒæ ‡å‡†çš„ GQL CALL è¯­å¥æ¥è°ƒç”¨å›¾ç®—æ³•å’Œè¿‡ç¨‹ï¼š</p>

<pre><code class="language-gql">
-- æœ€çŸ­è·¯å¾„
CALL shortest_path(1, 5)

-- æ‰€æœ‰è·¯å¾„ï¼ˆæŒ‡å®šæœ€å¤§æ·±åº¦ï¼‰
CALL all_paths(1, 5, 10)

-- é“¾è·¯è¿½è¸ª
CALL trace(1, 'forward', 5)       -- å‰å‘è¿½è¸ª
CALL trace(1, 'backward', 5)      -- åå‘è¿½è¸ª
CALL trace(1, 'both', 5)          -- åŒå‘è¿½è¸ª

-- æœ€å¤§æµåˆ†æ
CALL max_flow(1, 100)

-- é‚»å±…æŸ¥è¯¢
CALL neighbors(1, 'out')          -- å‡ºè¾¹é‚»å±…
CALL neighbors(1, 'in')           -- å…¥è¾¹é‚»å±…
CALL neighbors(1, 'both')         -- æ‰€æœ‰é‚»å±…

-- åº¦æ•°æŸ¥è¯¢
CALL degree(1)

-- è¿é€šæ€§æ£€æµ‹
CALL connected(1, 100)

-- å¯é€‰è°ƒç”¨ï¼ˆä¸å­˜åœ¨æ—¶è¿”å›ç©ºè€ŒéæŠ¥é”™ï¼‰
OPTIONAL CALL shortest_path(1, 999)
</code></pre>

<h4 id="å¯ç”¨çš„è¿‡ç¨‹åˆ—è¡¨">å¯ç”¨çš„è¿‡ç¨‹åˆ—è¡¨</h4>

<table class="table">
<thead>
<tr>
<th>è¿‡ç¨‹å</th>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>shortest_path(source, target)</code></td>
<td>source: èµ·ç‚¹ID, target: ç»ˆç‚¹ID</td>
<td>æŸ¥æ‰¾æœ€çŸ­è·¯å¾„</td>
</tr>
<tr>
<th><code>all<em>paths(source, target, max</em>depth?)</code></th>
<th>source, target, å¯é€‰æ·±åº¦é™åˆ¶</th>
<th>æŸ¥æ‰¾æ‰€æœ‰è·¯å¾„</th>
</tr>
<tr>
<th><code>trace(start, direction?, max_depth?)</code></th>
<th>start: èµ·ç‚¹, direction: forward/backward/both</th>
<th>é“¾è·¯è¿½è¸ª</th>
</tr>
<tr>
<th><code>max_flow(source, sink)</code></th>
<th>source: æºç‚¹, sink: æ±‡ç‚¹</th>
<th>è®¡ç®—æœ€å¤§æµ</th>
</tr>
<tr>
<th><code>neighbors(vertex_id, direction?)</code></th>
<th>vertex_id: é¡¶ç‚¹ID, direction: in/out/both</th>
<th>è·å–é‚»å±…</th>
</tr>
<tr>
<th><code>degree(vertex_id)</code></th>
<th>vertex_id: é¡¶ç‚¹ID</th>
<th>è·å–é¡¶ç‚¹åº¦æ•°</th>
</tr>
<tr>
<th><code>connected(source, target)</code></th>
<th>source, target: é¡¶ç‚¹ID</th>
<th>æ£€æŸ¥è¿é€šæ€§</th>
</tr>
</tbody>
</table>

<h3 id="show-è¯­å¥---æŸ¥çœ‹æ•°æ®åº“å¯¹è±¡">SHOW è¯­å¥ - æŸ¥çœ‹æ•°æ®åº“å¯¹è±¡</h3>

<p>æŸ¥çœ‹æ•°æ®åº“ä¸­çš„å„ç±»å¯¹è±¡ï¼š</p>

<pre><code class="language-gql">
-- æŸ¥çœ‹æ‰€æœ‰å›¾
SHOW GRAPHS

-- æŸ¥çœ‹æ‰€æœ‰å›¾ç±»å‹
SHOW GRAPH TYPES

-- æŸ¥çœ‹æ‰€æœ‰æ¨¡å¼
SHOW SCHEMAS

-- æŸ¥çœ‹æ‰€æœ‰é¡¶ç‚¹æ ‡ç­¾
SHOW LABELS

-- æŸ¥çœ‹æ‰€æœ‰è¾¹ç±»å‹
SHOW EDGE TYPES
SHOW RELATIONSHIP TYPES

-- æŸ¥çœ‹æ‰€æœ‰å±æ€§é”®
SHOW PROPERTY KEYS

-- æŸ¥çœ‹æ‰€æœ‰å‡½æ•°
SHOW FUNCTIONS

-- æŸ¥çœ‹æ‰€æœ‰è¿‡ç¨‹
SHOW PROCEDURES

-- æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•
SHOW INDEXES

-- æŸ¥çœ‹æ‰€æœ‰çº¦æŸ
SHOW CONSTRAINTS
</code></pre>

<h3 id="describe-è¯­å¥---æŸ¥çœ‹å¯¹è±¡è¯¦æƒ…">DESCRIBE è¯­å¥ - æŸ¥çœ‹å¯¹è±¡è¯¦æƒ…</h3>

<p>æŸ¥çœ‹æ•°æ®åº“å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ï¼š</p>

<pre><code class="language-gql">
-- æŸ¥çœ‹å›¾è¯¦æƒ…
DESCRIBE GRAPH myGraph
DESC GRAPH myGraph

-- æŸ¥çœ‹å›¾ç±»å‹è¯¦æƒ…
DESCRIBE GRAPH TYPE myGraphType
DESC GRAPH TYPE myType

-- æŸ¥çœ‹æ¨¡å¼è¯¦æƒ…
DESCRIBE SCHEMA public

-- æŸ¥çœ‹é¡¶ç‚¹æ ‡ç­¾è¯¦æƒ…
DESCRIBE LABEL Account

-- æŸ¥çœ‹è¾¹ç±»å‹è¯¦æƒ…
DESCRIBE EDGE TYPE Transfer
</code></pre>

<h3 id="å˜é‡ç»‘å®š-let---iso-gql-39075">å˜é‡ç»‘å®š (LET) - ISO GQL 39075</h3>

<p>ä½¿ç”¨ LET è¯­å¥å£°æ˜å’Œç»‘å®šå˜é‡ï¼š</p>

<pre><code class="language-gql">
-- å•ä¸ªå˜é‡ç»‘å®š
LET x = 10

-- å¤šä¸ªå˜é‡ç»‘å®š
LET x = 10, name = "Alice", active = true

-- å¤æ‚è¡¨è¾¾å¼ç»‘å®š
LET total = 100, tax_rate = 0.08
</code></pre>

<h3 id="è¿­ä»£è¯­å¥-for---iso-gql-39075">è¿­ä»£è¯­å¥ (FOR) - ISO GQL 39075</h3>

<p>ä½¿ç”¨ FOR è¯­å¥è¿›è¡Œåˆ—è¡¨è¿­ä»£ï¼Œæ”¯æŒåºæ•°å˜é‡ï¼š</p>

<pre><code class="language-gql">
-- åŸºæœ¬è¿­ä»£
FOR x IN [1, 2, 3, 4, 5]

-- ä½¿ç”¨ range() å‡½æ•°
FOR i IN range(1, 10)

-- å¸¦åºæ•°å˜é‡çš„è¿­ä»£
FOR item IN list WITH ORDINALITY AS ord

-- å®Œæ•´ç¤ºä¾‹
FOR i IN range(1, 100) WITH ORDINALITY AS idx
</code></pre>

<h3 id="è¿‡æ»¤è¯­å¥-filter---iso-gql-39075">è¿‡æ»¤è¯­å¥ (FILTER) - ISO GQL 39075</h3>

<p>ä½¿ç”¨ FILTER è¯­å¥è¿›è¡Œæ¡ä»¶è¿‡æ»¤ï¼š</p>

<pre><code class="language-gql">
-- åŸºæœ¬è¿‡æ»¤
FILTER n.age &gt; 18

-- å¤åˆæ¡ä»¶
FILTER n.status = "active" AND n.balance &gt; 1000

-- ä½¿ç”¨ OR
FILTER n.type = "Account" OR n.type = "Contract"

-- NOT æ¡ä»¶
FILTER NOT n.deleted
</code></pre>

<h3 id="é€‰æ‹©è¯­å¥-select---iso-gql-39075">é€‰æ‹©è¯­å¥ (SELECT) - ISO GQL 39075</h3>

<p>æ”¯æŒ SQL é£æ ¼çš„ SELECT æŸ¥è¯¢ï¼ŒåŒ…å«åˆ†ç»„ã€æ’åºã€èšåˆç­‰åŠŸèƒ½ï¼š</p>

<pre><code class="language-gql">
-- åŸºæœ¬é€‰æ‹©
SELECT n.name, n.age

-- ä½¿ç”¨ DISTINCT
SELECT DISTINCT n.type

-- åˆ†ç»„æŸ¥è¯¢
SELECT n.category, COUNT(*) 
GROUP BY n.category

-- å¸¦ HAVING çš„åˆ†ç»„
SELECT n.type, SUM(n.amount) AS total
GROUP BY n.type
HAVING SUM(n.amount) &gt; 10000

-- æ’åºå’Œåˆ†é¡µ
SELECT n.name, n.created_at
ORDER BY n.created_at DESC
LIMIT 10 OFFSET 20
</code></pre>

<h3 id="å›¾ä¸Šä¸‹æ–‡åˆ‡æ¢-use---iso-gql-39075">å›¾ä¸Šä¸‹æ–‡åˆ‡æ¢ (USE) - ISO GQL 39075</h3>

<p>ä½¿ç”¨ USE è¯­å¥åˆ‡æ¢å½“å‰å›¾ä¸Šä¸‹æ–‡ï¼š</p>

<pre><code class="language-gql">
-- åˆ‡æ¢åˆ°æŒ‡å®šå›¾
USE GRAPH ethereum_mainnet

-- åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå›¾
USE GRAPH polygon_network
</code></pre>

<h3 id="å¤åˆæŸ¥è¯¢---iso-gql-39075">å¤åˆæŸ¥è¯¢ - ISO GQL 39075</h3>

<p>æ”¯æŒ UNIONã€EXCEPTã€INTERSECTã€OTHERWISE æ“ä½œï¼š</p>

<pre><code class="language-gql">
-- è”åˆæŸ¥è¯¢
MATCH (a:Account) RETURN a
UNION ALL
MATCH (c:Contract) RETURN c

-- å·®é›†
MATCH (a:Account) RETURN a
EXCEPT
MATCH (b:Account {status: "inactive"}) RETURN b

-- äº¤é›†
MATCH (a:Account {type: "whale"}) RETURN a
INTERSECT
MATCH (b:Account {active: true}) RETURN b

-- OTHERWISE (å›é€€æŸ¥è¯¢)
MATCH (n:Account {address: "0x..."}) RETURN n
OTHERWISE
MATCH (n:Account) RETURN n LIMIT 1
</code></pre>

<h3 id="ä¼šè¯ç®¡ç†-session---iso-gql-39075">ä¼šè¯ç®¡ç† (SESSION) - ISO GQL 39075</h3>

<p>ç®¡ç†æŸ¥è¯¢ä¼šè¯çš„æ¨¡å¼ã€å›¾å’Œå±æ€§ï¼š</p>

<pre><code class="language-gql">
-- è®¾ç½®å½“å‰æ¨¡å¼
SESSION SET SCHEMA main_schema

-- è®¾ç½®å½“å‰å›¾
SESSION SET GRAPH ethereum

-- è®¾ç½®å±æ€§å›¾
SESSION SET PROPERTY GRAPH financial_graph

-- è®¾ç½®å¤šä¸ªå±æ€§
SESSION SET VALUE timeout = 30000

-- é‡ç½®ä¼šè¯
SESSION RESET SCHEMA
SESSION RESET GRAPH
SESSION RESET ALL

-- å…³é—­ä¼šè¯
SESSION CLOSE
</code></pre>

<h3 id="äº‹åŠ¡æ§åˆ¶-transaction---iso-gql-39075">äº‹åŠ¡æ§åˆ¶ (TRANSACTION) - ISO GQL 39075</h3>

<p>æ”¯æŒæ˜¾å¼äº‹åŠ¡ç®¡ç†ï¼š</p>

<pre><code class="language-gql">
-- å¼€å§‹è¯»å†™äº‹åŠ¡
START TRANSACTION READ WRITE

-- å¼€å§‹åªè¯»äº‹åŠ¡
START TRANSACTION READ ONLY

-- æäº¤äº‹åŠ¡
COMMIT

-- å›æ»šäº‹åŠ¡
ROLLBACK
</code></pre>

<h3 id="å›¾ç±»å‹å®šä¹‰-createdrop-graph-type---iso-gql-39075">å›¾ç±»å‹å®šä¹‰ (CREATE/DROP GRAPH TYPE) - ISO GQL 39075</h3>

<p>å®šä¹‰å’Œç®¡ç†å›¾ç±»å‹æ¨¡å¼ï¼š</p>

<pre><code class="language-gql">
-- åˆ›å»ºå›¾ç±»å‹
CREATE GRAPH TYPE financial_network AS (
  (account:Account {address STRING, balance DECIMAL}),
  (contract:Contract {address STRING, code_hash STRING}),
  (account)-[transfer:Transfer {amount DECIMAL}]-&gt;(account)
)

-- åˆ é™¤å›¾ç±»å‹
DROP GRAPH TYPE financial_network
</code></pre>

<h3 id="é‡åŒ–è·¯å¾„æ¨¡å¼---iso-gql-39075">é‡åŒ–è·¯å¾„æ¨¡å¼ - ISO GQL 39075</h3>

<p>æ”¯æŒè·¯å¾„é•¿åº¦é™åˆ¶å’Œæœç´¢æ¨¡å¼ï¼š</p>

<pre><code class="language-gql">
-- å¯å˜é•¿åº¦è·¯å¾„
MATCH (a)-[*1..5]-&gt;(b) RETURN path

-- ç²¾ç¡®é•¿åº¦è·¯å¾„
MATCH (a)-[*3]-&gt;(b) RETURN path

-- æœ€çŸ­è·¯å¾„å‰ç¼€
MATCH SHORTEST (a)-[*]-&gt;(b) RETURN path

-- æ‰€æœ‰æœ€çŸ­è·¯å¾„
MATCH ALL SHORTEST (a)-[*]-&gt;(b) RETURN path

-- ä»»æ„è·¯å¾„
MATCH ANY (a)-[*1..10]-&gt;(b) RETURN path

-- ä»»æ„æœ€çŸ­è·¯å¾„
MATCH ANY SHORTEST (a)-[*]-&gt;(b) RETURN path
</code></pre>

<h2 id="-rest-api">ğŸ”Œ REST API</h2>

<h3 id="æŸ¥è¯¢ç«¯ç‚¹">æŸ¥è¯¢ç«¯ç‚¹</h3>

<pre><code class="language-bash">
# æ‰§è¡Œ GQL æŸ¥è¯¢
curl -X POST http://localhost:8080/query \
  -H "Content-Type: application/json" \
  -d '{"query": "MATCH (n:Account) RETURN n LIMIT 10"}'

# è·å–é¡¶ç‚¹
curl http://localhost:8080/vertices/1

# é€šè¿‡åœ°å€è·å–é¡¶ç‚¹
curl http://localhost:8080/vertices/address/0x742d35Cc...
</code></pre>

<h3 id="ç®—æ³•ç«¯ç‚¹">ç®—æ³•ç«¯ç‚¹</h3>

<pre><code class="language-bash">
# æœ€çŸ­è·¯å¾„
curl -X POST http://localhost:8080/algorithm/shortest-path \
  -H "Content-Type: application/json" \
  -d '{"source": 1, "target": 100}'

# æ‰€æœ‰è·¯å¾„
curl -X POST http://localhost:8080/algorithm/all-paths \
  -H "Content-Type: application/json" \
  -d '{"source": 1, "target": 100, "max_depth": 5}'

# æœ€å¤§æµ
curl -X POST http://localhost:8080/algorithm/max-flow \
  -H "Content-Type: application/json" \
  -d '{"source": 1, "sink": 100}'

# é“¾è·¯è¿½è¸ª
curl -X POST http://localhost:8080/algorithm/trace \
  -H "Content-Type: application/json" \
  -d '{"start": 1, "direction": "forward", "max_depth": 10}'
</code></pre>

<h2 id="-æ¶æ„">ğŸ—ï¸ æ¶æ„</h2>

<pre><code>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REST API Layer                      â”‚
â”‚                   (axum HTTP Server)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Query Engine                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â”‚ Parser  â”‚   Executor   â”‚                  â”‚
â”‚              â”‚  (GQL)  â”‚              â”‚                  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Graph Algorithms                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚ Path Tracing â”‚        â”‚ Max Flow (E-K)   â”‚        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Graph Core                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  Vertex  â”‚  â”‚   Edge   â”‚  â”‚      Index        â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Storage Engine                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ Buffer Pool  â”‚  â”‚ Disk Storage â”‚  â”‚    Page    â”‚    â”‚
â”‚   â”‚    (LRU)     â”‚  â”‚   (mmap)     â”‚  â”‚   (4KB)    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     SSD      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<h2 id="-æ•°æ®æ¨¡å‹">ğŸ“Š æ•°æ®æ¨¡å‹</h2>

<h3 id="é¡¶ç‚¹ç±»å‹-vertexlabel">é¡¶ç‚¹ç±»å‹ (VertexLabel)</h3>

<table class="table">
<thead>
<tr>
<th>ç±»å‹</th>
<th>æè¿°</th>
<th>å…¸å‹å±æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Account</code></td>
<td>EOA è´¦æˆ·</td>
<td>address, balance, nonce</td>
</tr>
<tr>
<th><code>Contract</code></th>
<th>æ™ºèƒ½åˆçº¦</th>
<th>address, code_hash, creator</th>
</tr>
<tr>
<th><code>Token</code></th>
<th>ä»£å¸</th>
<th>address, symbol, decimals</th>
</tr>
<tr>
<th><code>Transaction</code></th>
<th>äº¤æ˜“</th>
<th>hash, block<em>number, gas</em>used</th>
</tr>
<tr>
<th><code>Block</code></th>
<th>åŒºå—</th>
<th>number, hash, timestamp</th>
</tr>
</tbody>
</table>

<h3 id="è¾¹ç±»å‹-edgelabel">è¾¹ç±»å‹ (EdgeLabel)</h3>

<table class="table">
<thead>
<tr>
<th>ç±»å‹</th>
<th>æè¿°</th>
<th>å…¸å‹å±æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Transfer</code></td>
<td>ä»£å¸è½¬è´¦</td>
<td>amount, token, tx_hash</td>
</tr>
<tr>
<th><code>Call</code></th>
<th>åˆçº¦è°ƒç”¨</th>
<th>method, gas, tx_hash</th>
</tr>
<tr>
<th><code>Create</code></th>
<th>åˆçº¦åˆ›å»º</th>
<th>tx<em>hash, block</em>number</th>
</tr>
<tr>
<th><code>Approve</code></th>
<th>æˆæƒ</th>
<th>amount, spender</th>
</tr>
</tbody>
</table>

<h2 id="-é…ç½®">âš™ï¸ é…ç½®</h2>

<h3 id="æœåŠ¡å™¨é…ç½®">æœåŠ¡å™¨é…ç½®</h3>

<table class="table">
<thead>
<tr>
<th>å‚æ•°</th>
<th>é»˜è®¤å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--data-dir</code></td>
<td><code>./data</code></td>
<td>æ•°æ®å­˜å‚¨ç›®å½•</td>
</tr>
<tr>
<th><code>--host</code></th>
<th><code>127.0.0.1</code></th>
<th>ç›‘å¬åœ°å€</th>
</tr>
<tr>
<th><code>--port</code></th>
<th><code>8080</code></th>
<th>ç›‘å¬ç«¯å£</th>
</tr>
<tr>
<th><code>--buffer-size</code></th>
<th><code>1024</code></th>
<th>ç¼“å†²æ± å¤§å°ï¼ˆé¡µé¢æ•°ï¼‰</th>
</tr>
</tbody>
</table>

<h3 id="æ€§èƒ½è°ƒä¼˜">æ€§èƒ½è°ƒä¼˜</h3>

<pre><code class="language-bash">
# å¤§è§„æ¨¡æ•°æ®åœºæ™¯
./target/release/chaingraph-server \
    --buffer-size 8192 \  # 32MB ç¼“å†²æ± 
    --data-dir /ssd/chaingraph
</code></pre>

<h2 id="-æµ‹è¯•">ğŸ§ª æµ‹è¯•</h2>

<pre><code class="language-bash">
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
cargo test storage::
cargo test algorithm::
cargo test query::

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench
</code></pre>

<h2 id="-è®¸å¯è¯">ğŸ“„ è®¸å¯è¯</h2>

<p>æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ <a href="LICENSE">LICENSE</a> æ–‡ä»¶ã€‚</p>

<h2 id="-è´¡çŒ®">ğŸ¤ è´¡çŒ®</h2>

<p>æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·å…ˆé˜…è¯» <a href="CONTRIBUTING.md">è´¡çŒ®æŒ‡å—</a>ã€‚</p>

<hr>

<p><p align="center"></p>
<p>  Made with â¤ï¸ for Web3</p>
<p></p></p>

        </main>
    </div>
    <script>
        // ç”Ÿæˆç›®å½•
        document.addEventListener('DOMContentLoaded', function() {
            const toc = document.getElementById('toc');
            const headings = document.querySelectorAll('h1, h2, h3');
            let tocHtml = '<ul>';
            headings.forEach(function(heading) {
                const level = parseInt(heading.tagName.charAt(1));
                const text = heading.textContent;
                const id = heading.id;
                const indent = (level - 1) * 15;
                tocHtml += `<li style="margin-left: ${indent}px"><a href="#${id}">${text}</a></li>`;
            });
            tocHtml += '</ul>';
            toc.innerHTML = tocHtml;
        });
    </script>
</body>
</html>